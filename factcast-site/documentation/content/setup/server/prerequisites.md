+++
draft = false
title = "Server Prerequisites"
description = ""
date = "2019-04-24018:36:24+02:00"

creatordisplayname = "Uwe Schaefer"
creatoremail = "uwe.schaefer@mercateo.com"

[menu.main]
parent = "setup_server"
identifier = "prerequisites"
weight = 50

+++



## Postgres

In Order to run the Factcast server, you have to provide a Postgres database at least in version 9.4.
The suggested configuration is to provide a _ddl user_ which will take care of creating all the necessary database objects. These objects will be used by the _dml user_ during application runtime. You have to provide the credentials for the _dml user_. If he doesn't exist on the initial server startup, the Factcast will create the user with the minimum number of necessary privileges. If the _dml user_ already exists, the creation and privileges assignment will be skipped and you have take care of the privileges yourself.


The following example shows the suggested configuration. The [factcast-example project](https://github.com/Mercateo/factcast/tree/master/factcast-examples/factcast-example-server) also contains that properties.

```
spring.liquibase.user="ddl-user" //that user has to be provided
spring.liquibase.password="ddl-user-pw"
spring.datasource.username="dml-user" // generated by the server on startup or already existing
spring.datasource.password="dml-user-pw"
```

The suggested configuration is to distinct between _ddl user_ and _dml user_, but you can also just provide one database user which will then be used for database object creation and application queries. As you combine _ddl_ and _dml_ _user_, all following statements about one of these users also counts for the _combined user_.
The following example shows the configuration with one user.

```
spring.datasource.username="user" //that user has to be provided
spring.datasource.password="password"
```


The _ddl user_ has to be a superuser, as he will also install Postgres modules like [uuid-ossp](https://www.postgresql.org/docs/11/uuid-ossp.html).

<details><summary>Read that, if you don't want to provide a superuser </summary>
<p>

If you don't want to provide a superuser as the _ddl user_, you have to consider the following points:

1.) The _ddl user_ needs at least the permission to query the pg_roles view. According to the [documentation](https://www.postgresql.org/docs/10/view-pg-roles.html) it's publicly accessible, so that shouldn't be a problem. If you want the Factcast to take care of the _dml user_ creation, than he needs also the permission to create other users and assign privileges for objects in the public scheme.

2.) The Factcast needs the Postgres module [uuid-ossp](https://www.postgresql.org/docs/11/uuid-ossp.html). You have to install that module manually. The server will recognize the already installed module and it won't throw an error caused by missing privileges.
Login into your Postgres console and execute the following command as superuser:

```
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";
``` 
</p>
</details>